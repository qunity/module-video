@import "../../default/_variables";

@player-control-bar-height: 5em;
@player-control-bar-elements-color: #eee;
@player-control-bar-background: rgba(0, 0, 0, .3);
@player-control-bar-background-filter: blur(1em);

@player-control-bar-tooltip-size: 1.1em;
@player-control-bar-play-control-size: 1.5em;
@player-control-bar-fullscreen-control-size: 1.2em;
@player-control-bar-time-control-size: 1.2em;
@player-control-bar-mute-control-size: 1.2em;

@player-control-bar-playback-rate-value-size: 1.2em;
@player-control-bar-playback-rate-hover-value-shadow: 0 0 .3em rgba(255, 255, 255, .7);

@player-control-bar-playback-rate-menu-border-radius: .4em;
@player-control-bar-playback-rate-menu-background: rgba(0, 0, 0, .5);
@player-control-bar-playback-rate-menu-shadow: 0 0 .5em rgba(0, 0, 0, .3);
@player-control-bar-playback-rate-menu-separate-border: .1em solid rgba(238, 238, 238, .5);

@player-control-bar-playback-rate-menu-item-text-shadow: 0 0 .3em rgba(0, 0, 0, .7);
@player-control-bar-playback-rate-menu-item-hover-background: rgba(0, 0, 0, .3);
@player-control-bar-playback-rate-menu-item-mark-selected-value-size: 2em;
@player-control-bar-playback-rate-menu-item-mark-selected-value-color: rgba(255, 255, 255, .7);

//
// ControlBar video component
// _____________________________________________
.vjs-control-bar {
  height: @player-control-bar-height;
  color: @player-control-bar-elements-color;
  background-color: @player-control-bar-background;
  backdrop-filter: @player-control-bar-background-filter;

  // General vertical alignment of elements
  .vjs-volume-control, .vjs-time-control, .vjs-playback-rate-value {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-content: center;
    height: 100% !important;
  }

  // Fixing color for lines and mouse serif
  .vjs-volume-level, .vjs-play-progress, .vjs-mouse-display {
    background-color: @player-control-bar-elements-color;
  }

  // Fixing SVG icon for progress control element
  .vjs-play-progress .vjs-icon-placeholder {
    top: 0;
    line-height: 1;
    transform: translateY(-50%);
  }

  // Styles of tooltip elements
  .vjs-time-tooltip, .vjs-volume-tooltip {
    top: calc(@player-control-bar-height / -2.5);
    font-size: @player-control-bar-tooltip-size !important;
    color: @player-control-bar-elements-color;
    background: transparent;
  }

  .vjs-volume-bar, .vjs-progress-holder {
    font-size: 1em !important;
  }

  .vjs-play-progress .vjs-time-tooltip {
    display: none !important;
  }

  // Styles of play control element
  .vjs-play-control {
    width: 3em;
    font-size: @player-control-bar-play-control-size;

    .vjs-icon-placeholder {
      margin-left: 1em;
    }
  }

  // Styles of fullscreen control element
  .vjs-fullscreen-control {
    width: 4em;
    font-size: @player-control-bar-fullscreen-control-size;

    .vjs-icon-placeholder {
      margin-right: 1em;
    }
  }

  // Styles of time control element
  .vjs-time-control {
    font-weight: 600;
    font-size: @player-control-bar-time-control-size;

    &.vjs-current-time {
      padding-right: 0;
    }

    &.vjs-duration {
      padding-left: 0;
    }
  }

  // Styles of mute control element
  .vjs-mute-control {
    font-size: @player-control-bar-mute-control-size;
  }

  // Restyle playback rate element
  .vjs-playback-rate {
    &.vjs-hover {
      .vjs-playback-rate-value {
        text-shadow: @player-control-bar-playback-rate-hover-value-shadow;
      }

      .vjs-menu-content {
        visibility: visible;
        opacity: 1;
      }
    }

    .vjs-playback-rate-value {
      font-weight: 600;
      font-size: @player-control-bar-playback-rate-value-size;
      transition: @player-small-duration;
      z-index: 1;
    }

    .vjs-menu {
      display: block !important;
      width: 130%;
      left: -15%;

      &:hover {
        visibility: visible;
      }
    }

    .vjs-menu-content {
      bottom: -.4em;
      visibility: hidden;
      overflow: visible;
      opacity: 0;
      border-radius: @player-control-bar-playback-rate-menu-border-radius;
      background-color: @player-control-bar-playback-rate-menu-background;
      box-shadow: @player-control-bar-playback-rate-menu-shadow;
      transition: visibility @player-small-duration,
        opacity @player-small-duration ease-in;

      &:after {
        content: '\00A0';
        display: block;
        padding: .45em 0;
        font-size: 1.2em;
        line-height: 1.4em;
        border-top: @player-control-bar-playback-rate-menu-separate-border;
      }
    }

    .vjs-menu-item {
      justify-content: flex-start;
      padding-left: 2em;
      font-size: 1.1em;
      line-height: 1.8em;
      text-shadow: @player-control-bar-playback-rate-menu-item-text-shadow;
      transition: @player-small-duration;

      &:first-child {
        border-top-left-radius: @player-control-bar-playback-rate-menu-border-radius;
        border-top-right-radius: @player-control-bar-playback-rate-menu-border-radius;
      }

      &:hover {
        background-color: @player-control-bar-playback-rate-menu-item-hover-background;
      }

      &.vjs-selected {
        color: unset;
        background-color: transparent;

        &:before {
          content: '\FF65';
          position: absolute;
          left: .3em;
          font-size: @player-control-bar-playback-rate-menu-item-mark-selected-value-size;
          color: @player-control-bar-playback-rate-menu-item-mark-selected-value-color;
        }

        &:hover {
          background-color: @player-control-bar-playback-rate-menu-item-hover-background;
        }
      }
    }
  }
}
