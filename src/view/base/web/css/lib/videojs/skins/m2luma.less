@import "default";

@player-top-bar-title-color: #eee;
@player-top-bar-title-shadow: 0 0 .5em rgba(0, 0, 0, .3);
@player-top-bar-description-color: #eee;
@player-top-bar-description-shadow: 0 0 .5em rgba(0, 0, 0, .3);
@player-top-bar-mask-gradient: linear-gradient(to bottom, rgba(0, 0, 0, .7), transparent);
@player-top-bar-background-gradient-color: rgba(0, 0, 0, .7);

@player-big-button-hover-color: #eee;
@player-big-button-mask-gradient: radial-gradient(rgba(0, 0, 0, .7), transparent);
@player-big-button-background-gradient-color: rgba(0, 0, 0, .7);
@player-big-button-size: 6em;
@player-big-button-wrapper-size: 8em;

@player-control-bar-height: 5em;
@player-control-bar-elements-color: #eee;
@player-control-bar-background-color: rgba(0, 0, 0, .3);
@player-control-bar-background-filter: blur(1em);
@player-control-bar-tooltip-size: 1em;

@player-control-bar-playback-rate-value-size: 1em;
@player-control-bar-playback-rate-hover-value-color: #fff;
@player-control-bar-playback-rate-hover-value-shadow: 0 0 .3em rgba(255, 255, 255, .7);

@player-control-bar-playback-rate-menu-border-radius: .5em;
@player-control-bar-playback-rate-menu-background-color: rgba(0, 0, 0, .5);
@player-control-bar-playback-rate-menu-shadow: 0 0 .5em rgba(0, 0, 0, .3);
@player-control-bar-playback-rate-menu-separate-border: .1em solid rgba(238, 238, 238, .5);

@player-control-bar-playback-rate-menu-item-text-shadow: 0 0 .3em rgba(0, 0, 0, .7);
@player-control-bar-playback-rate-menu-item-hover-background-color: rgba(0, 0, 0, .3);
@player-control-bar-playback-rate-menu-item-mark-selected-value-size: 2em;
@player-control-bar-playback-rate-menu-item-mark-selected-value-color: rgba(255, 255, 255, .7);

@player-error-message-color: #eee;
@player-error-description-size: 1.8em;
@player-error-description-color: rgba(238, 238, 238, .7);
@player-error-background-color: rgb(40, 40, 40);

.vjs-m2luma-skin {

  //
  // Restyle initialize and ended video states
  // _____________________________________________
  &.video-js {
    &.vjs-preview, &.vjs-ended {
      .vjs-big-button .vjs-icon-placeholder {
        &:hover {
          filter: drop-shadow(0 0 .5em @player-big-button-hover-color);
          transform: scale(1.05);
        }

        &:active {
          transform: scale(.9);
        }
      }
    }
  }

  //
  // TopBar video component
  // _____________________________________________
  .vjs-top-bar {
    &:before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      mask: @player-top-bar-mask-gradient;
      background-color: @player-top-bar-background-gradient-color;
      z-index: -1;
    }

    .vjs-top-title {
      line-height: 1.1;
      color: @player-top-bar-title-color;
      text-shadow: @player-top-bar-title-shadow;
    }

    .vjs-top-description {
      line-height: 1.2;
      color: @player-top-bar-description-color;
      text-shadow: @player-top-bar-description-shadow;
    }
  }

  //
  // BigButton video component
  // _____________________________________________
  .vjs-big-button {
    button {
      display: flex;
      justify-content: center;
      align-items: center;

      &:before {
        content: '';
        position: absolute;
        width: @player-big-button-wrapper-size;
        height: @player-big-button-wrapper-size;
        border-radius: @player-big-button-wrapper-size;
        mask: @player-big-button-mask-gradient;
        background-color: @player-big-button-background-gradient-color;
        z-index: -1;
      }
    }

    .vjs-icon-placeholder:hover {
      filter: none;
    }
  }

  //
  // ControlBar video component
  // _____________________________________________
  .vjs-control-bar {
    height: @player-control-bar-height;
    color: @player-control-bar-elements-color;
    background-color: @player-control-bar-background-color;
    backdrop-filter: @player-control-bar-background-filter;

    // General vertical alignment of elements
    .vjs-volume-control, .vjs-time-control, .vjs-playback-rate-value {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-content: center;
      height: 100% !important;
    }

    // Padding to edges of element
    .vjs-play-control, .vjs-fullscreen-control {
      width: 4.5em;
    }

    .vjs-play-control .vjs-icon-placeholder {
      margin-left: .5em;
    }

    .vjs-fullscreen-control .vjs-icon-placeholder {
      margin-right: .5em;
    }

    // Fixing color for lines and mouse serif
    .vjs-volume-level, .vjs-play-progress, .vjs-mouse-display {
      background-color: @player-control-bar-elements-color;
    }

    // Fixing SVG icon for ProgressControl element
    .vjs-play-progress .vjs-icon-placeholder {
      line-height: unset;
    }

    // Styles of tooltip elements
    .vjs-time-tooltip, .vjs-volume-tooltip {
      top: calc(@player-control-bar-height / -2.3);
      font-family: unset;
      font-size: @player-control-bar-tooltip-size !important;
      color: @player-control-bar-elements-color;
      background: transparent;
    }

    .vjs-progress-control:hover .vjs-progress-holder {
      font-size: @player-control-bar-tooltip-size;
    }

    .vjs-play-progress .vjs-time-tooltip {
      display: none;
    }

    // Restyle PlaybackRate element
    .vjs-playback-rate {
      &.vjs-hover {
        .vjs-playback-rate-value {
          font-weight: 600;
          color: @player-control-bar-playback-rate-hover-value-color;
          text-shadow: @player-control-bar-playback-rate-hover-value-shadow;
        }

        .vjs-menu-content {
          visibility: visible;
          opacity: 1;
        }
      }

      .vjs-playback-rate-value {
        font-size: @player-control-bar-playback-rate-value-size;
        transition: @player-small-duration;
        z-index: 1;
      }

      .vjs-menu {
        display: block !important;
        width: 120%;
        left: -10%;

        &:hover {
          visibility: visible;
        }
      }

      .vjs-menu-content {
        bottom: -.3em;
        visibility: hidden;
        overflow: visible;
        opacity: 0;
        font-family: unset;
        border-radius: @player-control-bar-playback-rate-menu-border-radius;
        background-color: @player-control-bar-playback-rate-menu-background-color;
        box-shadow: @player-control-bar-playback-rate-menu-shadow;
        transition: visibility @player-small-duration,
          opacity @player-small-duration ease-in;

        &:after {
          content: '\00A0';
          display: block;
          padding: .4em 0;
          font-size: 1.2em;
          line-height: 1.4em;
          border-top: @player-control-bar-playback-rate-menu-separate-border;
        }
      }

      .vjs-menu-item {
        justify-content: flex-start;
        padding-left: 1.6em;
        font-size: 1.1em;
        line-height: 1.8em;
        text-shadow: @player-control-bar-playback-rate-menu-item-text-shadow;
        transition: @player-small-duration;

        &:first-child {
          border-radius: @player-control-bar-playback-rate-menu-border-radius
            @player-control-bar-playback-rate-menu-border-radius 0 0;
        }

        &:hover {
          background-color: @player-control-bar-playback-rate-menu-item-hover-background-color;
        }

        &.vjs-selected {
          color: unset;
          background-color: transparent;

          &:before {
            content: '\FF65';
            position: absolute;
            left: .2em;
            font-size: @player-control-bar-playback-rate-menu-item-mark-selected-value-size;
            color: @player-control-bar-playback-rate-menu-item-mark-selected-value-color;
          }

          &:hover {
            background-color: @player-control-bar-playback-rate-menu-item-hover-background-color;
          }
        }
      }
    }
  }

  //
  // ErrorInfo video component
  // _____________________________________________
  .vjs-error-info {
    .vjs-error-icon:before {
      opacity: .7;
    }

    .vjs-error-message {
      font-weight: 600;
      line-height: 1.1;
      color: @player-error-message-color;
    }

    .vjs-error-description {
      line-height: 1.2;
      color: @player-error-description-color;
    }
  }
}
